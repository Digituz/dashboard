<div class="feature-header">
  <p>
    <label>Ordene seu relatório.</label>
  </p>
  <div class="actions">
    <app-button-back fallbackURL="/sales-orders"></app-button-back>
  </div>
</div>
<p-card>
  <form [formGroup]="formFields" (ngSubmit)="submitReport()">
    <div class="p-fluid p-formgrid p-grid">
      <div class="orderForm">
        <label class="marginHorizontal">Periodo: De</label>
        <p-inputMask mask="99/99/9999" formControlName="initialDate"></p-inputMask>
        <p class="marginHorizontal">Até</p>
        <p-inputMask mask="99/99/9999" formControlName="finalDate"></p-inputMask>
      </div>
      <div class="orderForm">
        <label class="marginHorizontal">Agrupar Por:</label>
        <p-dropdown [options]="groupBy" [showClear]="true" formControlName="groupBy"></p-dropdown>
      </div>
      <div class="orderForm">
        <button pButton type="submit" class="ui-button-primary" label="Agrupar"></button>
      </div>
    </div>
  </form>
</p-card>

<dgz-table
  #customersReportTable
  [dataProvider]="this"
  name="customersReportTable"
  [showPaginationArea]="false"
  *ngIf="loading === false"
>
  <thead>
    <tr>
      <th>Nome</th>
      <th>Email</th>
      <th>Telefone</th>
      <th>Total</th>
      <th>Detalhes</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let customerReport of customersReportTable.currentData">
      <td class="centered">{{ customerReport.name }}</td>
      <td class="centered">{{ customerReport.email }}</td>
      <td>{{ customerReport.phone_number }}</td>
      <td class="currency">{{ customerReport.total | reais }}</td>
      <td class="centered">
        <a [title]="'Detalhes do cliente'" [routerLink]="'/customers/' + customerReport.id">
          <button
            pButton
            type="button"
            class="ui-button-secondary"
            [icon]="'fal fa-search'"
            [pTooltip]="'Visualizar venda.'"
            tooltipPosition="top"
          ></button>
        </a>
      </td>
    </tr>
  </tbody>
</dgz-table>

<dgz-table
  #customersReportTable
  [dataProvider]="this"
  name="customersReportTable"
  [showPaginationArea]="false"
  *ngIf="showReport === 'PRODUCT'"
>
  <thead>
    <tr>
      <th>Nome</th>
      <th>SKU</th>
      <th>Valor Vendido</th>
      <th>Detalhes</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let customerReport of customersReportTable.currentData">
      <td class="centered">{{ customerReport.name }}</td>
      <td class="centered">{{ customerReport.email }}</td>
      <td>{{ customerReport.phone_number }}</td>
      <td class="centered">
        <a [title]="'Detalhes do cliente'" [routerLink]="'/customers/' + customerReport.id">
          <button
            pButton
            type="button"
            class="ui-button-secondary"
            [icon]="'fal fa-search'"
            [pTooltip]="'Visualizar venda.'"
            tooltipPosition="top"
          ></button>
        </a>
      </td>
    </tr>
  </tbody>
</dgz-table>
<!---<ng-container *ngIf="loading">
  <div class="dgz-table dgz-table-info">
    <i class="fal fa-exclamation-circle"></i>
    <p>Selecione como deseja agrupar o relátorio.</p>
  </div>
</ng-container>-->
