<div class="search-container">
  <form (ngSubmit)="queryProducts()">
    <div class="p-fluid p-formgrid p-grid">
      <div class="p-field p-col-12">
        <label for="query">Pesquisa</label>
        <input id="query" name="query" type="text" [(ngModel)]="query" pInputText />
      </div>
    </div>
    <div class="p-fluid p-formgrid p-grid">
      <div class="p-field p-col-6">
        <button pButton type="submit" label="Pesquisar"></button>
        <button
          pButton
          type="submit"
          class="p-button-secondary"
          (click)="resetFilter()"
          label="Limpar Filtros"
        ></button>
      </div>
    </div>
  </form>
</div>
<div class="feature-header">
  <p>
    <label>Controle seus produtos no mercado livre de forma simplificada.</label>
  </p>
  <div class="actions">
    <button
      title="Cadastrar Produto no mercado livre"
      routerLink="/mercado-livre/list/new"
      pButton
      type="button"
      label="Cadastrar Produto"
    ></button>
  </div>
</div>
<dgz-table
  [queryParams]="queryParams"
  (updateQueryParams)="updateQueryParams($event)"
  #MLProductsTable
  [dataProvider]="this"
  name="mercado-livre-list"
>
  <thead>
    <tr>
      <th></th>
      <th>SKU</th>
      <th>Titulo</th>
      <th>Preço Maxio</th>
      <th>Categoria</th>
      <th>Vinculado</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let mbProduct of MLProductsTable.currentData">
      <td class="thumbnail centered">
        <div>
          <i *ngIf="!mbProduct.product.thumbnail" class="fal fa-images"></i>
          <div class="square" *ngIf="mbProduct.product.thumbnail">
            <img [src]="mbProduct.product.thumbnail" [alt]="mbProduct.product.title" />
          </div>
        </div>
      </td>
      <td class="centered">{{ mbProduct.product.sku }}</td>
      <td>{{ mbProduct.product.title }}</td>
      <td class="centered">{{ mbProduct.product.sellingPrice }}</td>
      <td class="centered">{{ mbProduct.category }}</td>
      <td class="centered">
        <div
          class="badge"
          [ngClass]="{ sucess: mbProduct.product.isMBProduct } || { failure: mbProduct.product.isMBProduct }"
        >
          <i
            class="fal fa-check"
            *ngIf="mbProduct.product.isMBProduct === true"
            pTooltip="Produto sincronizado"
            tooltipPosition="top"
          ></i>
          <i
            class="fal fa-times"
            *ngIf="mbProduct.product.isMBProduct === 'false'"
            pTooltip="Pagamento não sincronizado"
            tooltipPosition="top"
          ></i>
        </div>
      </td>
    </tr>
  </tbody>
</dgz-table>
