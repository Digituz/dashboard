<nz-spin [nzSpinning]="isSpinning" [nzDelay]="500">
  <div class="upload-area">
    <nz-upload
      nzType="drag"
      [nzMultiple]="true"
      [nzShowUploadList]="false"
      nzAction="/media-library/upload"
      (nzChange)="handleChange($event)"
    >
      <p class="ant-upload-drag-icon">
        <i nz-icon nzType="picture" nzTheme="outline"></i>
      </p>
      <p class="ant-upload-text">Área de upload de imagens.</p>
      <p class="ant-upload-hint">
        Você pode arrastar e soltar imagens, ou clicar aqui e selecionar várias imagens.
      </p>
    </nz-upload>
  </div>
</nz-spin>
<div class="feature-header">
  <p>
    <label>Controle as imagens do seu negócio de forma simplificada.</label>
  </p>
  <div class="actions">
    <button nz-button nzType="primary" (click)="toggleManagementSection()">Gerenciar Imagens</button>
  </div>
</div>
<nz-card *ngIf="showManagementSection">
  <div nz-row [nzGutter]="16">
    <div nz-col class="gutter-row" [nzSpan]="24">
      <nz-form-label nzFor="tags">Tags:</nz-form-label>
      <nz-select
        id="tags"
        name="tags"
        nzMode="multiple"
        nzPlaceHolder="Selecione produtos"
        nzAllowClear
        nzShowSearch
        nzServerSearch
        [(ngModel)]="selectedProduct"
        (nzOnSearch)="onSearch($event)"
      >
        <ng-container *ngFor="let o of optionList">
          <nz-option *ngIf="!isProductListLoading" [nzValue]="o" [nzLabel]="o"></nz-option>
        </ng-container>
        <nz-option *ngIf="isProductListLoading" nzDisabled nzCustomContent>
          <i nz-icon nzType="loading" class="loading-icon"></i> Carregando lista de produtos...
        </nz-option>
      </nz-select>
    </div>
  </div>
</nz-card>
<div class="container">
  <div
    *ngFor="let image of images"
    [ngStyle]="{ 'background-image': 'url(' + image.smallFileURL + ')' }"
    (click)="showModal(image)"
  ></div>
</div>
<nz-modal
  nzWrapClassName="vertical-center-modal"
  [(nzVisible)]="isModalVisible"
  [nzTitle]="modalTitle"
  (nzOnCancel)="handleCancel()"
  (nzOnOk)="handleOk()"
  [nzCancelText]="'Cancel'"
  [nzOkText]="'Ok'"
>
  <img style="max-width: 100%;" [src]="modalImage" [alt]="modalTitle" />
</nz-modal>
